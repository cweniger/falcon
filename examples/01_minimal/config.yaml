graph:
# Minimal example configuration adapted to the newer API used by examples/02_pca

# Use local `src` directory for model components
model_path: "src"

# Logging configuration (Hydra run dir will be injected at runtime)
logging:
  project: falcon_minimal
  group: minimal_v1
  dir: ${hydra:run.dir}

# Paths (relative to Hydra output dir)
paths:
  buffer: ${hydra:run.dir}/sim_dir
  graph: ${hydra:run.dir}/graph_dir

# Simple graph using the _target_ style and local model components
graph:
  z:
    evidence: [x]
    scaffolds: []
    simulator:
      _target_: falcon.contrib.HypercubeMappingPrior
      priors:
        - ['uniform', -1.0, 1.0]
        - ['uniform', -1.0, 1.0]
    estimator:
      _target_: falcon.contrib.SNPE_A
      embedding:
        _target_: model.E
        _input_: [x]
      num_epochs: 10
      batch_size: 128
  
  x:
    parents: [z]
    simulator: model.Simulate
    observed: "data/observations_zero.npz"

sample:
  prior:
    n: 1000
    path: samples_prior.joblib
  posterior:
    n: 10000
    path: samples_posterior.joblib
